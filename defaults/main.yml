---
# defaults file for omero-prometheus-exporter

# OMERO username, required
# omero_prometheus_exporter_omero_user:

# OMERO password, required
# omero_prometheus_exporter_omero_password:

# OMERO server
omero_prometheus_exporter_omero_host: localhost

# System user account for running services
omero_prometheus_exporter_system_user: omero-prometheus

# Publish OMERO metrics on this port
# https://github.com/prometheus/prometheus/wiki/Default-port-allocations
omero_prometheus_exporter_port: 9449

# Recalculate metrics at this interval (seconds)
omero_prometheus_exporter_interval: 60

# List of query files for counts metrics
omero_prometheus_exporter_counts_query_files:
  - /opt/prometheus-omero-tools/venv3/etc/prometheus-omero-counts.yml


######################################################################
# Expert users only!
######################################################################

# Prometheus component versions
omero_prometheus_tools_version: 0.2.3

omero_prometheus_tools_requirements_ice_package: "https://github.com/glencoesoftware/zeroc-ice-py-linux-x86_64/releases/download/20240202/zeroc_ice-3.6.5-cp{{ omero_prometheus_tools_python_version }}-cp{{ omero_prometheus_tools_python_version }}-manylinux_2_28_x86_64.whl"


# Variable used in the ansible-role-python3-virtualenv and for the
# omero_web_python_requirements_ice_package. Use the same variable
# (python_version) for both omero-server and omero-web.
python_version: "3.12"

# Derived variable used in the omero_server_python_requirements_ice_package
omero_prometheus_tools_python_version: "{{ python_version | replace('.', '') }}"

# List of python3 packages to install
omero_prometheus_tools_requirements:
  # TODO: make the use of our non-standard wheel optional
  - "{{ omero_prometheus_tools_requirements_ice_package |
        default('zeroc-ice')}}"
  - omero-py>=5.18.0
  - "omero-prometheus-tools=={{ omero_prometheus_tools_version }}"

environment_file_path:
  RedHat: "/etc/sysconfig/prometheus-omero-exporter"
  Debian: "/etc/prometheus-omero-exporter"

systemd_prometheus_omero_exporter_env_file_path: >-
  {{ environment_file_path[ansible_os_family] |
      default('/etc')}}
